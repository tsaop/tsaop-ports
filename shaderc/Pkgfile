# Description: Khronos reference front-end for GLSL and ESSL, and sample SPIR-V generator
# URL: https://github.com/KhronosGroup/glslang
# Maintainer: Tsaop, leeroy at cock dot li
# Depends on: glslang

name=shaderc
version=98ab88b
release=1
source=()

build() {
	git clone --depth=1 https://github.com/google/shaderc
	cd $name

	# Clone external dependencies
	cd third_party
	git clone --depth=1 https://github.com/google/glslang.git
	git clone --depth=1 https://github.com/KhronosGroup/SPIRV-Tools.git spirv-tools
	git clone --depth=1 https://github.com/KhronosGroup/SPIRV-Headers.git spirv-headers
	cd -

	mkdir build; cd build
	cmake -DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib \
		-DCMAKE_BUILD_TYPE=Release \
		-DSHADERC_SKIP_TESTS=ON \
		-DSKIP_GLSLANG_INSTALL=ON \
		-DSKIP_SPIRV_TOOLS_INSTALL=ON \
		..

	make
	make DESTDIR=$PKG install
}
