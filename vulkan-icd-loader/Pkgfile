# Description:  Vulkan loader and validation layers 
# URL: https://github.com/KhronosGroup/Vulkan-LoaderAndValidationLayers
# Maintainer: Tsaop, leeroy at cock dot li
# Depends on: git mesa3d python3 xorg-libxrandr

name=vulkan-icd-loader
version=1.0.68.0
release=1
source=(https://github.com/KhronosGroup/Vulkan-LoaderAndValidationLayers/archive/sdk-$version.tar.gz)

build() {
	cd Vulkan-LoaderAndValidationLayers-sdk-$version
	./update_external_sources.sh

	mkdir build; cd build
	cmake -DCMAKE_INSTALL_PREFIX=/usr \
	-DBUILD_TESTS=OFF \
	-DCMAKE_INSTALL_LIBDIR=lib \
	-DBUILD_WSI_WAYLAND_SUPPORT=OFF \
	-DBUILD_WSI_MIR_SUPPORT=OFF \
	-DCMAKE_BUILD_TYPE=Release ..

	make
	make DESTDIR=$PKG install
}
